generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model agregados {
  agregadoId                Int                      @id @unique(map: "agregadoId_UNIQUE") @default(autoincrement()) @db.UnsignedInt
  nome                      String                      @db.VarChar(45)
  descricao                 String?                     @db.Text
  createdAt                 DateTime                    @default(now()) @db.Timestamp(0)
  updatedAt                 DateTime                    @default(now()) @db.Timestamp(0)
  estrategias_has_agregados estrategias_has_agregados[]
  regras                    regras[]
}

model ambientes {
  ambienteId                                 Int                                       @id @unique(map: "ambienteId_UNIQUE") @default(autoincrement()) @db.UnsignedInt
  nome                                       String                                       @db.VarChar(45)
  descricao                                  String?                                      @db.Text
  createdAt                                  DateTime                                     @default(now()) @db.Timestamp(0)
  updatedAt                                  DateTime                                     @default(now()) @db.Timestamp(0)
  projetos_projetoId                         Int                                       @db.UnsignedInt
  projetos                                   projetos                                     @relation(fields: [projetos_projetoId], references: [projetoId], onDelete: NoAction, onUpdate: NoAction, map: "fk_ambientes_projetos1")
  funcionalidades_has_projetos_and_ambientes funcionalidades_has_projetos_and_ambientes[]

  @@index([projetos_projetoId], map: "fk_ambientes_projetos1_idx")
}

model clientes {
  clienteId Int     @id @unique(map: "clienteId_UNIQUE") @default(autoincrement()) @db.UnsignedInt
  nome      String     @db.VarChar(256)
  descricao String?    @db.Text
  createdAt DateTime   @default(now()) @db.Timestamp(0)
  updatedAt DateTime   @default(now()) @db.Timestamp(0)
  projetos  projetos[]
  usuarios  usuarios[]
}

model estrategias {
  estrategiaId                     Int                      @id @unique(map: "estrategiaId_UNIQUE") @default(autoincrement()) @db.UnsignedInt
  tipo                             String                      @db.VarChar(45)
  descricao                        String?                     @db.Text
  parametros                       String                      @db.LongText
  createdAt                        DateTime                    @default(now()) @db.Timestamp(0)
  updatedAt                        DateTime                    @default(now()) @db.Timestamp(0)
  funcionalidades_funcionalidadeId Int                      @db.UnsignedInt
  funcionalidades                  funcionalidades             @relation(fields: [funcionalidades_funcionalidadeId], references: [funcionalidadeId], onDelete: NoAction, onUpdate: NoAction, map: "fk_estrategias_funcionalidades1")
  estrategias_has_agregados        estrategias_has_agregados[]
  regras                           regras[]

  @@index([funcionalidades_funcionalidadeId], map: "fk_estrategias_funcionalidades1_idx")
}

model estrategias_has_agregados {
  id                       Int      @id @unique(map: "id_UNIQUE") @default(autoincrement()) @db.UnsignedInt
  estrategias_estrategiaId Int      @db.UnsignedInt
  agregados_agregadoId     Int      @db.UnsignedInt
  agregados                agregados   @relation(fields: [agregados_agregadoId], references: [agregadoId], onDelete: NoAction, onUpdate: NoAction, map: "fk_estrategias_has_agregados_agregados1")
  estrategias              estrategias @relation(fields: [estrategias_estrategiaId], references: [estrategiaId], onDelete: NoAction, onUpdate: NoAction, map: "fk_estrategias_has_agregados_estrategias")

  @@index([agregados_agregadoId], map: "fk_estrategias_has_agregados_agregados1_idx")
  @@index([estrategias_estrategiaId], map: "fk_estrategias_has_agregados_estrategias_idx")
}

model funcionalidades {
  funcionalidadeId                           Int                                       @id @unique(map: "funcionalidadeId_UNIQUE") @default(autoincrement()) @db.UnsignedInt
  nome                                       String                                       @db.VarChar(50)
  descricao                                  String?                                      @db.Text
  tipo                                       String?                                      @db.VarChar(45)
  ativada                                    Int                                          @db.TinyInt
  createdAt                                  DateTime                                     @default(now()) @db.Timestamp(0)
  updatedAt                                  DateTime                                     @default(now()) @db.Timestamp(0)
  estrategias                                estrategias[]
  funcionalidades_has_projetos_and_ambientes funcionalidades_has_projetos_and_ambientes[]
}

model funcionalidades_has_projetos_and_ambientes {
  id                               Int          @id @unique(map: "id_UNIQUE") @default(autoincrement()) @db.UnsignedInt
  funcionalidades_funcionalidadeId Int          @db.UnsignedInt
  projetos_projetoId               Int          @db.UnsignedInt
  ambientes_ambienteId             Int          @db.UnsignedInt
  ambientes                        ambientes       @relation(fields: [ambientes_ambienteId], references: [ambienteId], onDelete: NoAction, onUpdate: NoAction, map: "fk_funcionalidades_has_projetos_and_ambientes_ambientes1")
  funcionalidades                  funcionalidades @relation(fields: [funcionalidades_funcionalidadeId], references: [funcionalidadeId], onDelete: NoAction, onUpdate: NoAction, map: "fk_funcionalidades_has_projetos_and_ambientes_funcionalidades1")
  projetos                         projetos        @relation(fields: [projetos_projetoId], references: [projetoId], onDelete: NoAction, onUpdate: NoAction, map: "fk_funcionalidades_has_projetos_and_ambientes_projetos1")

  @@index([ambientes_ambienteId], map: "fk_funcionalidades_has_projetos_and_ambientes_ambientes1_idx")
  @@index([funcionalidades_funcionalidadeId], map: "fk_funcionalidades_has_projetos_and_ambientes_funcionalidad_idx")
  @@index([projetos_projetoId], map: "fk_funcionalidades_has_projetos_and_ambientes_projetos1_idx")
}

model projetos {
  projetoId                                  Int                                       @id @unique(map: "projetoId_UNIQUE") @default(autoincrement()) @db.UnsignedInt
  nome                                       String                                       @db.VarChar(100)
  descricao                                  String?                                      @db.Text
  createdAt                                  DateTime                                     @default(now()) @db.Timestamp(0)
  updatedAt                                  DateTime                                     @default(now()) @db.Timestamp(0)
  clientes_clienteId                         Int                                       @db.UnsignedInt
  clientes                                   clientes                                     @relation(fields: [clientes_clienteId], references: [clienteId], onDelete: NoAction, onUpdate: NoAction, map: "fk_projetos_clientes1")
  ambientes                                  ambientes[]
  funcionalidades_has_projetos_and_ambientes funcionalidades_has_projetos_and_ambientes[]

  @@index([clientes_clienteId], map: "fk_projetos_clientes1_idx")
}

model regras {
  regraId                  Int       @id @unique(map: "regraId_UNIQUE") @default(autoincrement()) @db.UnsignedInt
  parametros               String       @db.LongText
  createdAt                DateTime     @default(now()) @db.Timestamp(0)
  updatedAt                DateTime     @default(now()) @db.Timestamp(0)
  agregados_agregadoId     Int?      @db.UnsignedInt
  estrategias_estrategiaId Int?      @db.UnsignedInt
  agregados                agregados?   @relation(fields: [agregados_agregadoId], references: [agregadoId], onDelete: NoAction, onUpdate: NoAction, map: "fk_regras_agregados1")
  estrategias              estrategias? @relation(fields: [estrategias_estrategiaId], references: [estrategiaId], onDelete: NoAction, onUpdate: NoAction, map: "fk_regras_estrategias1")

  @@index([agregados_agregadoId], map: "fk_regras_agregados1_idx")
  @@index([estrategias_estrategiaId], map: "fk_regras_estrategias1_idx")
}

model usuarios {
  usuarioId          Int        @id @unique(map: "usuarioId_UNIQUE") @default(autoincrement()) @db.UnsignedInt
  nome               String        @db.VarChar(256)
  email              String        @db.VarChar(128)
  usuario            String        @db.VarChar(45)
  tipo               usuarios_tipo
  senha              String?       @db.VarChar(256)
  createdAt          DateTime      @default(now()) @db.Timestamp(0)
  updatedAt          DateTime      @default(now()) @db.Timestamp(0)
  clientes_clienteId Int        @db.UnsignedInt
  clientes           clientes      @relation(fields: [clientes_clienteId], references: [clienteId], onDelete: NoAction, onUpdate: NoAction, map: "fk_usuarios_clientes1")

  @@index([clientes_clienteId], map: "fk_usuarios_clientes1_idx")
}

enum usuarios_tipo {
  Administrador
  Usuario
}
